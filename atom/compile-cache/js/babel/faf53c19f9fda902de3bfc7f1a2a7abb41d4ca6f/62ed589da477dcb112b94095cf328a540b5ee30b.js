'use babel';

function mouseEvent(type, properties) {
  var defaults = {
    bubbles: true,
    cancelable: type !== 'mousemove',
    view: window,
    detail: 0,
    pageX: 0,
    pageY: 0,
    clientX: 0,
    clientY: 0,
    ctrlKey: false,
    altKey: false,
    shiftKey: false,
    metaKey: false,
    button: 0,
    relatedTarget: undefined
  };

  for (var k in defaults) {
    var v = defaults[k];
    if (!(properties[k] != null)) {
      properties[k] = v;
    }
  }

  return new MouseEvent(type, properties);
}

function touchEvent(type, touches) {
  var firstTouch = touches[0];

  var properties = {
    bubbles: true,
    cancelable: true,
    view: window,
    ctrlKey: false,
    altKey: false,
    shiftKey: false,
    metaKey: false,
    relatedTarget: undefined
  };

  var e = new Event(type, properties);
  e.pageX = firstTouch.pageX;
  e.pageY = firstTouch.pageY;
  e.clientX = firstTouch.clientX;
  e.clientY = firstTouch.clientY;
  e.touches = e.targetTouches = e.changedTouches = touches;
  return e;
}

function objectCenterCoordinates(obj) {
  var _obj$getBoundingClientRect = obj.getBoundingClientRect();

  var top = _obj$getBoundingClientRect.top;
  var left = _obj$getBoundingClientRect.left;
  var width = _obj$getBoundingClientRect.width;
  var height = _obj$getBoundingClientRect.height;

  return { x: left + width / 2, y: top + height / 2 };
}

module.exports = { objectCenterCoordinates: objectCenterCoordinates, mouseEvent: mouseEvent };['mousedown', 'mousemove', 'mouseup', 'click'].forEach(function (key) {
  module.exports[key] = function (obj) {
    var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var x = _ref.x;
    var y = _ref.y;
    var cx = _ref.cx;
    var cy = _ref.cy;
    var btn = _ref.btn;

    if (!(typeof x !== 'undefined' && x !== null && typeof y !== 'undefined' && y !== null)) {
      var o = objectCenterCoordinates(obj);
      x = o.x;
      y = o.y;
    }

    if (!(typeof cx !== 'undefined' && cx !== null && typeof cy !== 'undefined' && cy !== null)) {
      cx = x;
      cy = y;
    }

    obj.dispatchEvent(mouseEvent(key, {
      pageX: x, pageY: y, clientX: cx, clientY: cy, button: btn
    }));
  };
});

module.exports.mousewheel = function (obj) {
  var deltaX = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];
  var deltaY = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];

  obj.dispatchEvent(mouseEvent('mousewheel', { deltaX: deltaX, deltaY: deltaY }));
};['touchstart', 'touchmove', 'touchend'].forEach(function (key) {
  module.exports[key] = function (obj) {
    var _ref2 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var x = _ref2.x;
    var y = _ref2.y;
    var cx = _ref2.cx;
    var cy = _ref2.cy;

    if (!(typeof x !== 'undefined' && x !== null && typeof y !== 'undefined' && y !== null)) {
      var o = objectCenterCoordinates(obj);
      x = o.x;
      y = o.y;
    }

    if (!(typeof cx !== 'undefined' && cx !== null && typeof cy !== 'undefined' && cy !== null)) {
      cx = x;
      cy = y;
    }

    obj.dispatchEvent(touchEvent(key, [{ pageX: x, pageY: y, clientX: cx, clientY: cy }]));
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGhvbHQvLmF0b20vcGFja2FnZXMvbWluaW1hcC9zcGVjL2hlbHBlcnMvZXZlbnRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQTs7QUFFWCxTQUFTLFVBQVUsQ0FBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO0FBQ3JDLE1BQUksUUFBUSxHQUFHO0FBQ2IsV0FBTyxFQUFFLElBQUk7QUFDYixjQUFVLEVBQUcsSUFBSSxLQUFLLFdBQVcsQUFBQztBQUNsQyxRQUFJLEVBQUUsTUFBTTtBQUNaLFVBQU0sRUFBRSxDQUFDO0FBQ1QsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFdBQU8sRUFBRSxDQUFDO0FBQ1YsV0FBTyxFQUFFLENBQUM7QUFDVixXQUFPLEVBQUUsS0FBSztBQUNkLFVBQU0sRUFBRSxLQUFLO0FBQ2IsWUFBUSxFQUFFLEtBQUs7QUFDZixXQUFPLEVBQUUsS0FBSztBQUNkLFVBQU0sRUFBRSxDQUFDO0FBQ1QsaUJBQWEsRUFBRSxTQUFTO0dBQ3pCLENBQUE7O0FBRUQsT0FBSyxJQUFJLENBQUMsSUFBSSxRQUFRLEVBQUU7QUFDdEIsUUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ25CLFFBQUksRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFBLEFBQUMsRUFBRTtBQUM1QixnQkFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtLQUNsQjtHQUNGOztBQUVELFNBQU8sSUFBSSxVQUFVLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFBO0NBQ3hDOztBQUVELFNBQVMsVUFBVSxDQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDbEMsTUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBOztBQUUzQixNQUFJLFVBQVUsR0FBRztBQUNmLFdBQU8sRUFBRSxJQUFJO0FBQ2IsY0FBVSxFQUFFLElBQUk7QUFD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QUFDLENBQUEiLCJmaWxlIjoiL1VzZXJzL2FsaG9sdC8uYXRvbS9wYWNrYWdlcy9taW5pbWFwL3NwZWMvaGVscGVycy9ldmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5mdW5jdGlvbiBtb3VzZUV2ZW50ICh0eXBlLCBwcm9wZXJ0aWVzKSB7XG4gIGxldCBkZWZhdWx0cyA9IHtcbiAgICBidWJibGVzOiB0cnVlLFxuICAgIGNhbmNlbGFibGU6ICh0eXBlICE9PSAnbW91c2Vtb3ZlJyksXG4gICAgdmlldzogd2luZG93LFxuICAgIGRldGFpbDogMCxcbiAgICBwYWdlWDogMCxcbiAgICBwYWdlWTogMCxcbiAgICBjbGllbnRYOiAwLFxuICAgIGNsaWVudFk6IDAsXG4gICAgY3RybEtleTogZmFsc2UsXG4gICAgYWx0S2V5OiBmYWxzZSxcbiAgICBzaGlmdEtleTogZmFsc2UsXG4gICAgbWV0YUtleTogZmFsc2UsXG4gICAgYnV0dG9uOiAwLFxuICAgIHJlbGF0ZWRUYXJnZXQ6IHVuZGVmaW5lZFxuICB9XG5cbiAgZm9yIChsZXQgayBpbiBkZWZhdWx0cykge1xuICAgIGxldCB2ID0gZGVmYXVsdHNba11cbiAgICBpZiAoIShwcm9wZXJ0aWVzW2tdICE9IG51bGwpKSB7XG4gICAgICBwcm9wZXJ0aWVzW2tdID0gdlxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgTW91c2VFdmVudCh0eXBlLCBwcm9wZXJ0aWVzKVxufVxuXG5mdW5jdGlvbiB0b3VjaEV2ZW50ICh0eXBlLCB0b3VjaGVzKSB7XG4gIGxldCBmaXJzdFRvdWNoID0gdG91Y2hlc1swXVxuXG4gIGxldCBwcm9wZXJ0aWVzID0ge1xuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICB2aWV3OiB3aW5kb3csXG4gICAgY3RybEtleTogZmFsc2UsXG4gICAgYWx0S2V5OiBmYWxzZSxcbiAgICBzaGlmdEtleTogZmFsc2UsXG4gICAgbWV0YUtleTogZmFsc2UsXG4gICAgcmVsYXRlZFRhcmdldDogdW5kZWZpbmVkXG4gIH1cblxuICBsZXQgZSA9IG5ldyBFdmVudCh0eXBlLCBwcm9wZXJ0aWVzKVxuICBlLnBhZ2VYID0gZmlyc3RUb3VjaC5wYWdlWFxuICBlLnBhZ2VZID0gZmlyc3RUb3VjaC5wYWdlWVxuICBlLmNsaWVudFggPSBmaXJzdFRvdWNoLmNsaWVudFhcbiAgZS5jbGllbnRZID0gZmlyc3RUb3VjaC5jbGllbnRZXG4gIGUudG91Y2hlcyA9IGUudGFyZ2V0VG91Y2hlcyA9IGUuY2hhbmdlZFRvdWNoZXMgPSB0b3VjaGVzXG4gIHJldHVybiBlXG59XG5cbmZ1bmN0aW9uIG9iamVjdENlbnRlckNvb3JkaW5hdGVzIChvYmopIHtcbiAgbGV0IHt0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHR9ID0gb2JqLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiB7eDogbGVmdCArIHdpZHRoIC8gMiwgeTogdG9wICsgaGVpZ2h0IC8gMn1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7b2JqZWN0Q2VudGVyQ29vcmRpbmF0ZXMsIG1vdXNlRXZlbnR9XG5cbjtbJ21vdXNlZG93bicsICdtb3VzZW1vdmUnLCAnbW91c2V1cCcsICdjbGljayddLmZvckVhY2goKGtleSkgPT4ge1xuICBtb2R1bGUuZXhwb3J0c1trZXldID0gZnVuY3Rpb24gKG9iaiwge3gsIHksIGN4LCBjeSwgYnRufSA9IHt9KSB7XG4gICAgaWYgKCEoKHR5cGVvZiB4ICE9PSAndW5kZWZpbmVkJyAmJiB4ICE9PSBudWxsKSAmJiAodHlwZW9mIHkgIT09ICd1bmRlZmluZWQnICYmIHkgIT09IG51bGwpKSkge1xuICAgICAgbGV0IG8gPSBvYmplY3RDZW50ZXJDb29yZGluYXRlcyhvYmopXG4gICAgICB4ID0gby54XG4gICAgICB5ID0gby55XG4gICAgfVxuXG4gICAgaWYgKCEoKHR5cGVvZiBjeCAhPT0gJ3VuZGVmaW5lZCcgJiYgY3ggIT09IG51bGwpICYmICh0eXBlb2YgY3kgIT09ICd1bmRlZmluZWQnICYmIGN5ICE9PSBudWxsKSkpIHtcbiAgICAgIGN4ID0geFxuICAgICAgY3kgPSB5XG4gICAgfVxuXG4gICAgb2JqLmRpc3BhdGNoRXZlbnQobW91c2VFdmVudChrZXksIHtcbiAgICAgIHBhZ2VYOiB4LCBwYWdlWTogeSwgY2xpZW50WDogY3gsIGNsaWVudFk6IGN5LCBidXR0b246IGJ0blxuICAgIH0pKVxuICB9XG59KVxuXG5tb2R1bGUuZXhwb3J0cy5tb3VzZXdoZWVsID0gZnVuY3Rpb24gKG9iaiwgZGVsdGFYID0gMCwgZGVsdGFZID0gMCkge1xuICBvYmouZGlzcGF0Y2hFdmVudChtb3VzZUV2ZW50KCdtb3VzZXdoZWVsJywge2RlbHRhWCwgZGVsdGFZfSkpXG59XG5cbjtbJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJywgJ3RvdWNoZW5kJ10uZm9yRWFjaCgoa2V5KSA9PiB7XG4gIG1vZHVsZS5leHBvcnRzW2tleV0gPSBmdW5jdGlvbiAob2JqLCB7eCwgeSwgY3gsIGN5fSA9IHt9KSB7XG4gICAgaWYgKCEoKHR5cGVvZiB4ICE9PSAndW5kZWZpbmVkJyAmJiB4ICE9PSBudWxsKSAmJiAodHlwZW9mIHkgIT09ICd1bmRlZmluZWQnICYmIHkgIT09IG51bGwpKSkge1xuICAgICAgbGV0IG8gPSBvYmplY3RDZW50ZXJDb29yZGluYXRlcyhvYmopXG4gICAgICB4ID0gby54XG4gICAgICB5ID0gby55XG4gICAgfVxuXG4gICAgaWYgKCEoKHR5cGVvZiBjeCAhPT0gJ3VuZGVmaW5lZCcgJiYgY3ggIT09IG51bGwpICYmICh0eXBlb2YgY3kgIT09ICd1bmRlZmluZWQnICYmIGN5ICE9PSBudWxsKSkpIHtcbiAgICAgIGN4ID0geFxuICAgICAgY3kgPSB5XG4gICAgfVxuXG4gICAgb2JqLmRpc3BhdGNoRXZlbnQodG91Y2hFdmVudChrZXksIFtcbiAgICAgIHtwYWdlWDogeCwgcGFnZVk6IHksIGNsaWVudFg6IGN4LCBjbGllbnRZOiBjeX1cbiAgICBdKSlcbiAgfVxufSlcbiJdfQ==
//# sourceURL=/Users/alholt/.atom/packages/minimap/spec/helpers/events.js
