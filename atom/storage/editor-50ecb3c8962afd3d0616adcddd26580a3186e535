{"version":1,"windowDimensions":{"x":1440,"y":-87,"width":960,"height":1057,"maximized":false},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/alholt/code/mcdn-portal/test/models/perforcejob"],"buffers":[{"text":"require 'test_helper'\n\nclass PurgeApiUsersTest < ActiveSupport::TestCase\n  test 'expired login passwords remove purge users from purgeapi_users' do\n    # we need:\n    #   - customer to attach the test users to\n    #   - three purgeadmin users:\n    #     - user1: user with unexpired login password and unexpired purge password\n    #     - user1's purge password should show up in generator output\n    #\n    #     - user2: user with expired login password and unexpired purge password\n    #     - user2's purge password should not show up in generator output\n    #\n    #     - user3: user with unexpired login password and expired purge password\n    #     - user3's purge password should show up in generator output (we fall back\n    #         to login password if purge password is expired)\n\n    customer = create(:customer)\n\n    user1 = create(:user, :purgeadmin, name: 'test_user_alpha', customer: customer)\n    user1.create_password('login', 'blah')\n    user1.create_random_password('purge', :encode)\n\n    user2 = create(:user, :purgeadmin, name: 'test_user_beta', customer: customer)\n    user2.create_password('login', 'blah')\n    user2.create_random_password('purge', :encode)\n    user2.password_with_label('login').expire\n\n    user3 = create(:user, :purgeadmin, name: 'test_user_delta', customer: customer)\n    user3.create_password('login', 'blah')\n    user3.create_random_password('purge', :encode)\n    user3.password_with_label('purge').expire\n\n    generator = PurgeapiUsersGenerator.new()\n    output = generator.generate(nil, {})\n\n    assert /test_user_alpha/.match(output), 'test_user_alpha not present in output'\n    assert_not /test_user_beta/.match(output), 'test_user_beta present in output'\n    assert /test_user_delta/.match(output), 'test_user_delta not present in output'\n  end\n\n  # split into three tests\n  test 'unexpired login password appears in output' do\n\n  end\n\n  test 'expired login password does not appear in output' do\n\n  end\n\n  test 'expired purge password appears in output' do\n    \n  end\nend\n\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"nextMarkerId":0,"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"nextMarkerId":0,"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"nextMarkerId":1,"id":"2","maintainHistory":true,"markersById":{"2-0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2}},"nextMarkerLayerId":3,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/alholt/code/mcdn-portal/test/models/perforcejob/purgeapi_users_test.rb","digestWhenLastPersisted":"4c6874d5c4757c3c674f9c4b0c4165ca57e4a5d1","preferredLineEnding":null,"deserializer":"TextBuffer","version":4}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":4,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":5,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/alholt/code/mcdn-portal/test/models/perforcejob/purgeapi_users_test.rb","tabLength":2,"largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/alholt/code/mcdn-portal/test/models/perforcejob/purgeapi_users_test.rb","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-ruby","language-hyperlink","language-todo"],"destroyedItemURIs":[]},"packageStates":{"fuzzy-finder":{"/Users/alholt/code/mcdn-portal/test/models/perforcejob/purgeapi_users_test.rb":1450363538210},"metrics":{"sessionLength":3662},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/alholt/code/mcdn-portal/test/models/perforcejob":{"isExpanded":true,"entries":{}}},"selectedPath":"/Users/alholt/code/mcdn-portal/test/models/perforcejob/purgeapi_users_test.rb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}},"fullScreen":false}